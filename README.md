# The Stability of Conditional Cooperation (Andreozzi, Ploner, Saral) 

This repository contains the files for the study: the data, R code, and z-Tree files. 
It also includes a zBrac compatible treatment file and the language template for easy translation. (To find more information about zBrac [click here](https://www.github.com/seyhunsaral/zbrac))

## Files in this repository
### code
 * `functions.R` : Contains functions that is used in other files 
 * `main.R` : This file reproduces figures and the tables in the paper.
 * `process_raw_data.R`: This file takes the raw data in `./data/rawdata/` folder and produces CSV and RDS files for the analysis. The repository already containes cleaned-up data. Only for the sake of reproduction.
 
### data
 
#### csv
 Generated by `process_raw_data.R`. CSV files are for those who like to use other software than `R`. Not used in the analysis
 * `decbehav.csv`: Each subjects interaction with the interface is recorded here. Not used for the analysis
 * `quest.csv`: Post-experiment questionnaire data
 * `subjects.csv`: Main data file
 
#### rawdata
 This folder contains raw data of each session.
 
#### rds
 Generated by `process_raw_data.R`. R Data Tables in R Object form. Used for the analysis. The advantage of those files over the CSV files that they contain the data types of each column as well. For the definitions see `csv` section above.
 * `decbehav.csv`
 * `quest.csv`
 * `subjects.csv`
 
### figs
 This empty folder is for the figures to be generated by `main.R`
 
### ztree
 * `condcoop_english.txt`: English version of the main experiment. Created with. `zBrac`. Should be imported with z-Tree.
 * `cond_coop_zbrac_language_template.xlsx` Language file for the zBrac. It can be edited and used with `condcoop_zbrac.txt` to generate the experiment in other languages.
 * `condcoop_zbrac.txt`: `zBrac` source file. It can be used to generate treatment files in different languages.
 #### original-italian
 Contains original z-Tree files in Italian Language
 * `1_control_questions.ztt` : Control questions
 * `2_condcoop.ztt`: Experiment
 * `3_quest.ztq`: Questionnaire




## Glossary for z-Tree Files
| Variable          | Table    | Type      | Description                                                              |
|-------------------|----------|-----------|--------------------------------------------------------------------------|
| IE                | globals  | constant  | Initial Endowment                                                        |
| IEg               | globals  | constant  | Initial Endowment for the beliefs                                        |
| cL                | globals  | constant  | Low contribution amount                                                  |
| cM                | globals  | constant  | Medium contribution amount                                               |
| cH                | globals  | constant  | High contribution amount                                                 |
| PeriodSelected    | globals  | constant  | Selected period for payments                                             |
| RegularTimeOut    | globals  | constant  | Timeout for stages                                                       |
| Debug             | globals  | debugging | Debug mode on (1) off (0)                                                |
| DebugTimeOut      | globals  | debugging | Timeout when debug mode is on                                            |
| dbgFocusOnStage   | globals  | debugging | Stage to go directly when debug mode is on                               |
| dbgShouldLeave    | globals  | debugging | Condition to leave stage when debug mode is on                           |
| dbgCurrentStage   | globals  | debugging | Stage number to be used for skipping to a certain stage                  |
| FirstPlayer       | subjects | game      | 1 if the player is selected to be the first player, 0 otherwise          |
| uC                | subjects | game      | choice as the first player                                               |
| ccL               | subjects | game      | conditional choice if the other player chooses L (0)                     |
| ccM               | subjects | game      | conditional choice if the other player chooses M  (50)                   |
| ccH               | subjects | game      | conditional choice if the other player chooses H  (100)                  |
| Action            | subjects | game      | action that was actualized (after the random role assingment)            |
| opp               | subjects | game      | opponents number                                                         |
| ouc               | subjects | game      | opponent's choice of the opponent                                        |
| occL              | subjects | game      | opponent's conditional choice for L (0)                                  |
| occM              | subjects | game      | opponent's conditional choice for M (50)                                 |
| occH              | subjects | game      | opponent's conditional choice for H (100)                                |
| buc_L             | subjects | game      | beliefs - probability opponent plays L in unconditonal choice            |
| buc_M             | subjects | game      | beliefs - probability opponent plays M in unconditonal choice            |
| buc_H             | subjects | game      | beliefs - probability opponent plays H in unconditonal choice            |
| bccL_L            | subjects | game      | beliefs - probability opponent plays L in response to L                  |
| bccL_M            | subjects | game      | beliefs - probability opponent plays M in response to L                  |
| bccL_H            | subjects | game      | beliefs - probability opponent plays H in response to L                  |
| bccM_L            | subjects | game      | beliefs - probability opponent plays L in response to M                  |
| bccM_M            | subjects | game      | beliefs - probability opponent plays M in response to M                  |
| bccM_H            | subjects | game      | beliefs - probability opponent plays H in response to M                  |
| bccH_L            | subjects | game      | beliefs - probability opponent plays L in response to H                  |
| bccH_M            | subjects | game      | beliefs - probability opponent plays M in response to H                  |
| bccH_H            | subjects | game      | beliefs - probability opponent plays H in response to H                  |
| oAction           | subjects | game      | opponent's action that was actualized (after the random role assignment) |
| EarningKept       | subjects | game      | Earnings from the amount kept                                            |
| EarningReceived   | subjects | game      | Earnings from the opponent's transfer                                    |
| EarningGuess      | subjects | game      | Earninns from the expectations period (beliefs)                          |
| EarningGame       | subjects | game      | Earnings from the decision phase (EarningKept + EarningReceived)         |
| FinalEarningGame  | subjects | game      | Earnings from the decision phase in the selected period                  |
| FinalEarningGuess | subjects | game      | Earnings from the expectations phase in the selected period              |

